{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-9fcd9f84\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"group-title\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"button-view\",\n    onClick: $setup.fetchGroups\n  }, _toDisplayString(_ctx.$t('buttons.showGroups')), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"clear-button\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showModal = true)\n  }, _toDisplayString(_ctx.$t('buttons.deleteAll')), 1 /* TEXT */), $setup.groups.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"h4\", null, _toDisplayString(_ctx.$t('buttons.revision_P1')), 1 /* TEXT */), _createElementVNode(\"h4\", null, _toDisplayString(_ctx.$t('buttons.revision_P2')), 1 /* TEXT */), _hoisted_3, _createElementVNode(\"button\", {\n    class: \"button-view\",\n    onClick: $setup.downloadCSV\n  }, _toDisplayString(_ctx.$t('buttons.downloadGroups')), 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredGroupsByCard, (group, groupIndex) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: groupIndex\n    }, [_createVNode($setup[\"VaCard\"], {\n      class: \"mb-4 border-b-2\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"h3\", _hoisted_4, \"Grupo \" + _toDisplayString(groupIndex + 1), 1 /* TEXT */), group.length ? (_openBlock(), _createBlock($setup[\"VaDataTable\"], {\n        key: 0,\n        class: \"bg-light-beige text-l mb-12\",\n        items: group,\n        columns: $setup.translatedColumns,\n        filter: $setup.filter,\n        \"filter-method\": $setup.customFilteringFn,\n        \"header-class\": 'custom-header',\n        onFiltered: _cache[1] || (_cache[1] = $event => $setup.filteredCount = $event.items.length)\n      }, null, 8 /* PROPS */, [\"items\", \"columns\", \"filter\"])) : _createCommentVNode(\"v-if\", true)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.filteredCount !== null ? (_openBlock(), _createBlock($setup[\"VaAlert\"], {\n    key: 0,\n    class: \"!mt-6\",\n    color: \"info\",\n    outline: \"\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Number of filtered items: \"), _createVNode($setup[\"VaChip\"], null, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.filteredCount), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createVNode($setup[\"ConfirmationModal\"], {\n    visible: $setup.showModal,\n    title: _ctx.$t('modals.confirmDeleteTitle'),\n    message: _ctx.$t('modals.confirmDeleteMessage'),\n    onConfirm: $setup.clearTable,\n    onCancel: _cache[2] || (_cache[2] = $event => $setup.showModal = false)\n  }, null, 8 /* PROPS */, [\"visible\", \"title\", \"message\"])]);\n}","map":{"version":3,"names":["key","_createElementVNode","class","_createElementBlock","onClick","$setup","fetchGroups","_ctx","$t","_cache","$event","showModal","groups","length","_hoisted_1","_hoisted_2","_toDisplayString","_hoisted_3","downloadCSV","_Fragment","_renderList","filteredGroupsByCard","group","groupIndex","_createVNode","default","_withCtx","_hoisted_4","_createBlock","items","columns","translatedColumns","filter","customFilteringFn","onFiltered","filteredCount","_createCommentVNode","_","color","outline","_createTextVNode","visible","title","message","onConfirm","clearTable","onCancel"],"sources":["/home/alumno/HackatonF5/Frontend/hackathon-admin/src/components/TeamDetail.vue"],"sourcesContent":["\n\n <template>\n  <div>\n    <button class=\"button-view\" @click=\"fetchGroups\">{{ $t('buttons.showGroups') }}</button>\n    <button class=\"clear-button\" @click=\"showModal = true\">{{$t('buttons.deleteAll')}}</button>\n\n    <div v-if=\"groups.length\">\n      <br>\n      <h4>{{ $t('buttons.revision_P1') }}</h4>\n      <h4>{{ $t('buttons.revision_P2') }}</h4>\n      <br>\n      <button class=\"button-view\" @click=\"downloadCSV\">{{ $t('buttons.downloadGroups') }}</button>\n\n      <div v-for=\"(group, groupIndex) in filteredGroupsByCard\" :key=\"groupIndex\">\n        <VaCard class=\"mb-4 border-b-2\">\n          <h3 class=\"group-title\">Grupo {{ groupIndex + 1 }}</h3>\n          <VaDataTable class=\"bg-light-beige text-l mb-12\"\n            v-if=\"group.length\"\n            :items=\"group\"\n            :columns=\"translatedColumns\"\n            :filter=\"filter\"\n            :filter-method=\"customFilteringFn\"\n            :header-class=\"'custom-header'\"\n            @filtered=\"filteredCount = $event.items.length\"\n          />\n        </VaCard>\n      </div>\n\n      <VaAlert v-if=\"filteredCount !== null\" class=\"!mt-6\" color=\"info\" outline>\n        Number of filtered items:\n        <VaChip>{{ filteredCount }}</VaChip>\n      </VaAlert>\n    </div>\n\n    <ConfirmationModal\n      :visible=\"showModal\"\n      :title=\"$t('modals.confirmDeleteTitle')\"\n      :message=\"$t('modals.confirmDeleteMessage')\"\n      @confirm=\"clearTable\"\n      @cancel=\"showModal = false\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport axios from 'axios';\nimport { VaInput, VaSelect, VaDataTable, VaAlert, VaChip, VaCard } from 'vuestic-ui';\nimport { useI18n } from 'vue-i18n';\nimport ConfirmationModal from './ConfirmationModal.vue';\n\nconst { t } = useI18n();\n\nconst groups = ref([]);\nconst filter = ref(\"\");\nconst filterByFields = ref([]);\nconst filteredCount = ref(null);\nconst showModal = ref(false);\n\nconst fetchGroups = async () => {\n  try {\n    const response = await axios.get('http://localhost:4000/api/grupos');\n    groups.value = response.data;\n  } catch (error) {\n    console.error('Error fetching groups:', error);\n  }\n};\n\nconst downloadCSV = async () => {\n  try {\n    let csvContent = 'data:text/csv;charset=utf-8,';\n    groups.value.forEach((group, groupIndex) => {\n      csvContent += `Grupo ${groupIndex + 1}\\n`;\n      csvContent += 'Nombre,Apellido,Email,Front,Back,Bootcamp\\n';\n      group.forEach(person => {\n        csvContent += `${person.nombre},${person.apellido},${person.email},${person.front},${person.back},${person.bootcamp}\\n`;\n      });\n      csvContent += '\\n';\n    });\n\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement('a');\n    link.setAttribute('href', encodedUri);\n    link.setAttribute('download', 'grupos.csv');\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  } catch (error) {\n    console.error('Error al descargar el archivo CSV:', error);\n  }\n};\n\nconst clearTable = async () => {\n  try {\n    const response = await axios.delete('http://localhost:4000/api/clear');\n    /* alert(response.data.message); */\n    location.reload();\n  } catch (error) {\n    console.error('Error clearing table:', error);\n    alert('There was an error clearing the table.');\n  } finally {\n    showModal.value = false;\n  }\n};\n\nconst flattenedGroups = computed(() => {\n  return groups.value.flatMap((group, groupIndex) => {\n    return group.map(person => ({ ...person, groupIndex: groupIndex + 1 }));\n  });\n});\n\nconst filteredGroupsByCard = computed(() => {\n  return groups.value.map(group => {\n    return group.filter(person => customFilteringFn(person, { column: { key: filterByFields.value.join() }}));\n  });\n});\n\nconst columns = [\n  { key: \"groupIndex\", label: \"table.group\" },\n  { key: \"nombre\", label: \"table.name\" },\n  { key: \"apellido\", label: \"table.surname\" },\n  { key: \"email\", label: \"table.email\" },\n  { key: \"front\", label: \"table.front\" },\n  { key: \"back\", label: \"table.back\" },\n  { key: \"bootcamp\", label: \"table.bootcamp\" }\n];\n\nconst translatedColumns = computed(() => {\n  return columns.map(column => ({\n    ...column,\n    label: t(column.label)\n  }));\n});\n\nconst columnsWithName = [\n  { value: \"groupIndex\", text: t(\"table.group\") },\n  { value: \"nombre\", text: t(\"table.name\") },\n  { value: \"apellido\", text: t(\"table.surname\") },\n  { value: \"email\", text: t(\"table.email\") },\n  { value: \"front\", text: t(\"table.front\") },\n  { value: \"back\", text: t(\"table.back\") },\n  { value: \"bootcamp\", text: t(\"table.bootcamp\") }\n];\n\nconst customFilteringFn = (source, cellData) => {\n  if (!filter.value) {\n    return true;\n  }\n  if (filterByFields.value.length >= 1) {\n    const searchInCurrentRow = filterByFields.value.some(\n      (field) => cellData.column.key === field\n    );\n    if (!searchInCurrentRow) return false;\n  }\n  const filterRegex = new RegExp(filter.value, \"i\");\n  return Object.values(source).some(value => filterRegex.test(value));\n};\n</script>\n\n<style scoped>\n.grid {\n  display: grid;\n}\n.button-view {\n  background-color: #03bd3e;\n  border: none;\n  color: rgb(255, 255, 255);\n  padding: 0.625rem 1.25rem;\n  text-align: center;\n  text-decoration: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.1rem;\n  margin: 0.25rem 0.125rem;\n  cursor: pointer;\n  border-radius: 0.25rem;\n}\n.button-view:hover {\n  background-color: #a3a8a4;\n  color: rgb(17, 17, 17);\n}\n.clear-button {\n  background-color: #f44336;\n  border: none;\n  font-weight: bold;\n  color: rgb(255, 255, 255);\n  padding: 10px 20px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 16px;\n  margin: 4px 2px;\n  cursor: pointer;\n  border-radius: 6px;\n}\n.clear-button:hover {\n  background-color: #941108;\n  color: rgb(255, 255, 255);\n}\n.group-title {\n  font-size: 1.25rem;\n  font-weight: bold;\n  margin-bottom: 1rem;\n}\n.va-select-wrapper {\n  position: relative; /* Establecer posición relativa */\n  z-index: 1; /* Asegurar que el VaSelect esté en un nivel superior */\n  overflow: visible; /* Permitir que el VaSelect despliegue fuera de su contenedor */\n}\n.custom-header {\n  font-size: 2.5rem; /* Adjust the font size as needed */\n  font-weight: bold; /* Optional: to make the text bold */\n}\n</style>"],"mappings":";;;EAAAA,GAAA;AAAA;gEAQMC,mBAAA,CAAI;gEAGJA,mBAAA,CAAI;;EAKIC,KAAK,EAAC;AAAa;;uBAb/BC,mBAAA,CAuCM,cAtCJF,mBAAA,CAAwF;IAAhFC,KAAK,EAAC,aAAa;IAAEE,OAAK,EAAEC,MAAA,CAAAC;sBAAgBC,IAAA,CAAAC,EAAE,wCACtDP,mBAAA,CAA2F;IAAnFC,KAAK,EAAC,cAAc;IAAEE,OAAK,EAAAK,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEL,MAAA,CAAAM,SAAS;sBAAWJ,IAAA,CAAAC,EAAE,uCAEhDH,MAAA,CAAAO,MAAM,CAACC,MAAM,I,cAAxBV,mBAAA,CA0BM,OAjCVW,UAAA,GAQMC,UAAI,EACJd,mBAAA,CAAwC,YAAAe,gBAAA,CAAjCT,IAAA,CAAAC,EAAE,yCACTP,mBAAA,CAAwC,YAAAe,gBAAA,CAAjCT,IAAA,CAAAC,EAAE,yCACTS,UAAI,EACJhB,mBAAA,CAA4F;IAApFC,KAAK,EAAC,aAAa;IAAEE,OAAK,EAAEC,MAAA,CAAAa;sBAAgBX,IAAA,CAAAC,EAAE,6C,kBAEtDL,mBAAA,CAaMgB,SAAA,QA3BZC,WAAA,CAcyCf,MAAA,CAAAgB,oBAAoB,EAd7D,CAcmBC,KAAK,EAAEC,UAAU;yBAA9BpB,mBAAA,CAaM;MAboDH,GAAG,EAAEuB;IAAU,IACvEC,YAAA,CAWSnB,MAAA;MAXDH,KAAK,EAAC;IAAiB;MAfvCuB,OAAA,EAAAC,QAAA,CAgBU,MAAuD,CAAvDzB,mBAAA,CAAuD,MAAvD0B,UAAuD,EAA/B,QAAM,GAAAX,gBAAA,CAAGO,UAAU,sBAEnCD,KAAK,CAACT,MAAM,I,cADpBe,YAAA,CAQEvB,MAAA;QAzBZL,GAAA;QAiBuBE,KAAK,EAAC,6BAA6B;QAE7C2B,KAAK,EAAEP,KAAK;QACZQ,OAAO,EAAEzB,MAAA,CAAA0B,iBAAiB;QAC1BC,MAAM,EAAE3B,MAAA,CAAA2B,MAAM;QACd,eAAa,EAAE3B,MAAA,CAAA4B,iBAAiB;QAChC,cAAY,EAAE,eAAe;QAC7BC,UAAQ,EAAAzB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEL,MAAA,CAAA8B,aAAa,GAAGzB,MAAM,CAACmB,KAAK,CAAChB,MAAM;iEAxB1DuB,mBAAA,e;MAAAC,CAAA;;kCA6BqBhC,MAAA,CAAA8B,aAAa,a,cAA5BP,YAAA,CAGUvB,MAAA;IAhChBL,GAAA;IA6B6CE,KAAK,EAAC,OAAO;IAACoC,KAAK,EAAC,MAAM;IAACC,OAAO,EAAP;;IA7BxEd,OAAA,EAAAC,QAAA,CA6BgF,MAExE,CA/BRc,gBAAA,CA6BgF,6BAExE,GAAAhB,YAAA,CAAoCnB,MAAA;MA/B5CoB,OAAA,EAAAC,QAAA,CA+BgB,MAAmB,CA/BnCc,gBAAA,CAAAxB,gBAAA,CA+BmBX,MAAA,CAAA8B,aAAa,iB;MA/BhCE,CAAA;;IAAAA,CAAA;QAAAD,mBAAA,e,KAAAA,mBAAA,gBAmCIZ,YAAA,CAMEnB,MAAA;IALCoC,OAAO,EAAEpC,MAAA,CAAAM,SAAS;IAClB+B,KAAK,EAAEnC,IAAA,CAAAC,EAAE;IACTmC,OAAO,EAAEpC,IAAA,CAAAC,EAAE;IACXoC,SAAO,EAAEvC,MAAA,CAAAwC,UAAU;IACnBC,QAAM,EAAArC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEL,MAAA,CAAAM,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}