{"ast":null,"code":"import ArrowUp from './ArrowUp.vue';\nimport { ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport Papa from 'papaparse';\nexport default {\n  __name: 'UploadCsv',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      t\n    } = useI18n();\n    const file = ref(null);\n    const message = ref('');\n    const csvData = ref([]);\n    const handleFileUpload = event => {\n      const uploadedFile = event.target.files[0];\n      if (uploadedFile) {\n        file.value = uploadedFile;\n        parseCSV(uploadedFile);\n      }\n    };\n    const handleDrop = event => {\n      const droppedFile = event.dataTransfer.files[0];\n      if (droppedFile) {\n        file.value = droppedFile;\n        parseCSV(droppedFile);\n      }\n    };\n    const parseCSV = file => {\n      Papa.parse(file, {\n        complete: results => {\n          csvData.value = results.data;\n        },\n        header: false\n      });\n    };\n    const submitFile = async () => {\n      if (!file.value) {\n        message.value = t('upload.selectCSVFile');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('file', file.value);\n      try {\n        const response = await fetch('http://localhost:4000/api/upload', {\n          method: 'POST',\n          body: formData\n        });\n        const data = await response.json();\n        if (response.ok) {\n          message.value = t('upload.successfulUpload');\n        } else {\n          message.value = data.error;\n        }\n      } catch (error) {\n        message.value = t('upload.errorUpload');\n      }\n    };\n    const __returned__ = {\n      t,\n      file,\n      message,\n      csvData,\n      handleFileUpload,\n      handleDrop,\n      parseCSV,\n      submitFile,\n      ArrowUp,\n      ref,\n      get useI18n() {\n        return useI18n;\n      },\n      get Papa() {\n        return Papa;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ArrowUp","ref","useI18n","Papa","t","file","message","csvData","handleFileUpload","event","uploadedFile","target","files","value","parseCSV","handleDrop","droppedFile","dataTransfer","parse","complete","results","data","header","submitFile","formData","FormData","append","response","fetch","method","body","json","ok","error"],"sources":["/home/alumno/HackatonF5/Frontend/hackathon-admin/src/components/UploadCsv.vue"],"sourcesContent":["<template>\n  <div class=\"upload-file-container\">\n    <div class=\"upload-file-box\" @drop.prevent=\"handleDrop\" @dragover.prevent>\n      <div class=\"upload-content\">\n        <i class=\"fa fa-upload upload-icon\"></i>\n        <input class=\"upload-button\" type=\"file\" @change=\"handleFileUpload\" />\n        <button class=\"upload-button\" @click=\"submitFile\"> {{ $t('upload.uploadButton') }}</button>\n        <p class=\"upload-message\" v-if=\"message\">{{ message }}</p>\n      </div>\n    </div>\n    <div class=\"csv-preview\" v-if=\"csvData.length > 0\">\n      <table class=\"mb-12\">\n        <thead>\n          <tr>\n            <th v-for=\"(header, index) in csvData[0]\" :key=\"index\">{{ header }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(row, rowIndex) in csvData.slice(1)\" :key=\"rowIndex\">\n            <td v-for=\"(cell, cellIndex) in row\" :key=\"cellIndex\">{{ cell }}</td>\n          </tr>\n        </tbody>\n      </table>\n      \n    </div>\n    <ArrowUp />\n  </div>\n</template>\n<script setup>\nimport ArrowUp from './ArrowUp.vue';\nimport { ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport Papa from 'papaparse';\n\nconst { t } = useI18n();\n\nconst file = ref(null);\nconst message = ref('');\nconst csvData = ref([]);\n\nconst handleFileUpload = (event) => {\n  const uploadedFile = event.target.files[0];\n  if (uploadedFile) {\n    file.value = uploadedFile;\n    parseCSV(uploadedFile);\n  }\n};\n\nconst handleDrop = (event) => {\n  const droppedFile = event.dataTransfer.files[0];\n  if (droppedFile) {\n    file.value = droppedFile;\n    parseCSV(droppedFile);\n  }\n};\n\nconst parseCSV = (file) => {\n  Papa.parse(file, {\n    complete: (results) => {\n      csvData.value = results.data;\n    },\n    header: false,\n  });\n};\n\nconst submitFile = async () => {\n  if (!file.value) {\n    message.value = t('upload.selectCSVFile');\n    return;\n  }\n\n  const formData = new FormData();\n  formData.append('file', file.value);\n\n  try {\n    const response = await fetch('http://localhost:4000/api/upload', {\n      method: 'POST',\n      body: formData,\n    });\n    const data = await response.json();\n    if (response.ok) {\n      message.value = t('upload.successfulUpload');\n    } else {\n      message.value = data.error;\n    }\n  } catch (error) {\n    message.value = t('upload.errorUpload');\n  }\n};\n</script>\n"],"mappings":"AA6BA,OAAOA,OAAO,MAAM,eAAe;AACnC,SAASC,GAAG,QAAQ,KAAK;AACzB,SAASC,OAAO,QAAQ,UAAU;AAClC,OAAOC,IAAI,MAAM,WAAW;;;;;;;IAE5B,MAAM;MAAEC;IAAE,CAAC,GAAGF,OAAO,CAAC,CAAC;IAEvB,MAAMG,IAAI,GAAGJ,GAAG,CAAC,IAAI,CAAC;IACtB,MAAMK,OAAO,GAAGL,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMM,OAAO,GAAGN,GAAG,CAAC,EAAE,CAAC;IAEvB,MAAMO,gBAAgB,GAAIC,KAAK,IAAK;MAClC,MAAMC,YAAY,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC1C,IAAIF,YAAY,EAAE;QAChBL,IAAI,CAACQ,KAAK,GAAGH,YAAY;QACzBI,QAAQ,CAACJ,YAAY,CAAC;MACxB;IACF,CAAC;IAED,MAAMK,UAAU,GAAIN,KAAK,IAAK;MAC5B,MAAMO,WAAW,GAAGP,KAAK,CAACQ,YAAY,CAACL,KAAK,CAAC,CAAC,CAAC;MAC/C,IAAII,WAAW,EAAE;QACfX,IAAI,CAACQ,KAAK,GAAGG,WAAW;QACxBF,QAAQ,CAACE,WAAW,CAAC;MACvB;IACF,CAAC;IAED,MAAMF,QAAQ,GAAIT,IAAI,IAAK;MACzBF,IAAI,CAACe,KAAK,CAACb,IAAI,EAAE;QACfc,QAAQ,EAAGC,OAAO,IAAK;UACrBb,OAAO,CAACM,KAAK,GAAGO,OAAO,CAACC,IAAI;QAC9B,CAAC;QACDC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI,CAAClB,IAAI,CAACQ,KAAK,EAAE;QACfP,OAAO,CAACO,KAAK,GAAGT,CAAC,CAAC,sBAAsB,CAAC;QACzC;MACF;MAEA,MAAMoB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAErB,IAAI,CAACQ,KAAK,CAAC;MAEnC,IAAI;QACF,MAAMc,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAkC,EAAE;UAC/DC,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEN;QACR,CAAC,CAAC;QACF,MAAMH,IAAI,GAAG,MAAMM,QAAQ,CAACI,IAAI,CAAC,CAAC;QAClC,IAAIJ,QAAQ,CAACK,EAAE,EAAE;UACf1B,OAAO,CAACO,KAAK,GAAGT,CAAC,CAAC,yBAAyB,CAAC;QAC9C,CAAC,MAAM;UACLE,OAAO,CAACO,KAAK,GAAGQ,IAAI,CAACY,KAAK;QAC5B;MACF,CAAC,CAAC,OAAOA,KAAK,EAAE;QACd3B,OAAO,CAACO,KAAK,GAAGT,CAAC,CAAC,oBAAoB,CAAC;MACzC;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}