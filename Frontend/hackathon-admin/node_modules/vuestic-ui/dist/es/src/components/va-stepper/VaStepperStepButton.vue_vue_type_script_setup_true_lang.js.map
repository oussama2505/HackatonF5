{"version":3,"file":"VaStepperStepButton.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/va-stepper/VaStepperStepButton.vue"],"sourcesContent":["<template>\n  <li\n    ref=\"stepElement\"\n    class=\"va-stepper__step-button\"\n    :class=\"computedClass\"\n    @click=\"!$props.navigationDisabled && $props.stepControls.setStep(stepIndexComputed)\"\n    @keyup.enter=\"!$props.navigationDisabled && $props.stepControls.setStep(stepIndexComputed)\"\n    @keyup.space=\"!$props.navigationDisabled && $props.stepControls.setStep(stepIndexComputed)\"\n    v-bind=\"ariaAttributesComputed\"\n   :style=\"`--va-stepper-color: ${String(stepperColor)}`\">\n    <div class=\"va-stepper__step-button__icon\">\n      <va-progress-circle\n        v-if=\"isLoading\"\n        color=\"currentColor\"\n        indeterminate\n        size=\"small\"\n      />\n      <va-icon\n        v-else-if=\"step.icon\"\n        :name=\"step.icon\"\n        size=\"1.3rem\"\n      />\n      <template v-else>\n        {{ stepIndexComputed + 1 }}\n      </template>\n    </div>\n    {{ step.label }}\n  </li>\n</template>\n<script lang=\"ts\" setup>\nimport { computed, ComputedRef, nextTick, PropType, shallowRef, watch } from 'vue'\nimport { VaIcon } from '../va-icon'\nimport { useBem, useColors, useNumericProp, useTranslation } from '../../composables'\nimport { VaProgressCircle } from '../va-progress-circle'\nimport type { Step, StepControls } from './types'\nimport { unFunction } from '../../utils/un-function'\nimport { isStepHasError } from './step'\n\ndefineOptions({\n  name: 'VaStepperStepButton',\n})\n\nconst props = defineProps({\n  modelValue: { type: Number, required: true },\n  step: {\n    type: Object as PropType<Step>,\n    required: true,\n  },\n  color: { type: String, required: true },\n  stepIndex: { type: [Number, String], required: true },\n  navigationDisabled: { type: Boolean, required: true },\n  nextDisabled: { type: Boolean, required: true },\n  focus: { type: Object, required: true },\n  stepControls: { type: Object as PropType<StepControls>, required: true },\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst stepElement = shallowRef<HTMLElement>()\nconst hasError = computed(() => isStepHasError(props.step))\nconst stepIndexComputed = useNumericProp('stepIndex') as ComputedRef<number>\nconst displayError = computed(() => hasError.value && props.modelValue === stepIndexComputed.value)\nconst isLoading = computed<boolean>(() => unFunction(props.step.isLoading) || false)\nconst { getColor } = useColors()\nconst stepperColor = computed(() => getColor(hasError.value ? 'danger' : props.color))\n\nconst isNextStepDisabled = (index: number) => props.nextDisabled && index > props.modelValue\n\nconst { t } = useTranslation()\n\nconst computedClass = useBem('va-stepper__step-button', () => ({\n  active: props.modelValue >= stepIndexComputed.value,\n  disabled: props.step.disabled || isNextStepDisabled(stepIndexComputed.value),\n  'navigation-disabled': props.navigationDisabled,\n  error: displayError.value,\n}))\n\nwatch(() => props.focus, () => {\n  if (props.focus.trigger) {\n    nextTick(() => stepElement.value?.focus())\n  }\n}, { deep: true })\n\nconst ariaAttributesComputed = computed(() => ({\n  tabindex: props.focus.stepIndex === stepIndexComputed.value && !props.navigationDisabled ? 0 : undefined,\n  'aria-disabled': props.step.disabled || isNextStepDisabled(stepIndexComputed.value) ? true : undefined,\n  'aria-current': props.modelValue === props.stepIndex ? t('step') as 'step' : undefined,\n}))\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-stepper {\n  &__step-button {\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: var(--va-stepper-step-button-gap);\n    flex-shrink: 0;\n    padding: var(--va-stepper-step-button-padding);\n\n    @include keyboard-focus-outline($radius: var(--va-stepper-step-border-radius));\n\n    &::after {\n      content: \"\";\n      position: absolute;\n      cursor: pointer;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: var(--va-stepper-color);\n      transition: opacity 0.3s;\n      opacity: 0;\n      border-radius: var(--va-stepper-step-border-radius);\n    }\n\n    &__icon {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: var(--va-stepper-step-button-icon-size);\n      width: var(--va-stepper-step-button-icon-size);\n      font-size: var(--va-stepper-step-button-number-size);\n      color: white;\n      background: var(--va-stepper-step-button-inactive-color);\n      border-radius: var(--va-stepper-step-button-icon-border-radius);\n    }\n\n    &--active {\n      color: var(--va-stepper-color);\n\n      .va-stepper__step-button__icon {\n        background: var(--va-stepper-color);\n      }\n    }\n\n    &--disabled {\n      opacity: var(--va-stepper-step-button-disabled-opacity);\n      pointer-events: none;\n    }\n\n    &:hover::after {\n      opacity: var(--va-stepper-step-button-hover-highlight-opacity);\n    }\n\n    &--navigation-disabled::after {\n      display: none;\n    }\n\n    &--error {\n      color: var(--va-danger);\n\n      .va-stepper__step-button__icon {\n        background: var(--va-danger);\n      }\n    }\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,UAAM,QAAQ;AAgBd,UAAM,cAAc;AACpB,UAAM,WAAW,SAAS,MAAM,eAAe,MAAM,IAAI,CAAC;AACpD,UAAA,oBAAoB,eAAe,WAAW;AAC9C,UAAA,eAAe,SAAS,MAAM,SAAS,SAAS,MAAM,eAAe,kBAAkB,KAAK;AAC5F,UAAA,YAAY,SAAkB,MAAM,WAAW,MAAM,KAAK,SAAS,KAAK,KAAK;AAC7E,UAAA,EAAE,aAAa;AACf,UAAA,eAAe,SAAS,MAAM,SAAS,SAAS,QAAQ,WAAW,MAAM,KAAK,CAAC;AAErF,UAAM,qBAAqB,CAAC,UAAkB,MAAM,gBAAgB,QAAQ,MAAM;AAE5E,UAAA,EAAE,MAAM;AAER,UAAA,gBAAgB,OAAO,2BAA2B,OAAO;AAAA,MAC7D,QAAQ,MAAM,cAAc,kBAAkB;AAAA,MAC9C,UAAU,MAAM,KAAK,YAAY,mBAAmB,kBAAkB,KAAK;AAAA,MAC3E,uBAAuB,MAAM;AAAA,MAC7B,OAAO,aAAa;AAAA,IACpB,EAAA;AAEI,UAAA,MAAM,MAAM,OAAO,MAAM;AACzB,UAAA,MAAM,MAAM,SAAS;AACvB,iBAAS,MAAA;;AAAM,mCAAY,UAAZ,mBAAmB;AAAA,SAAO;AAAA,MAC3C;AAAA,IAAA,GACC,EAAE,MAAM,KAAA,CAAM;AAEX,UAAA,yBAAyB,SAAS,OAAO;AAAA,MAC7C,UAAU,MAAM,MAAM,cAAc,kBAAkB,SAAS,CAAC,MAAM,qBAAqB,IAAI;AAAA,MAC/F,iBAAiB,MAAM,KAAK,YAAY,mBAAmB,kBAAkB,KAAK,IAAI,OAAO;AAAA,MAC7F,gBAAgB,MAAM,eAAe,MAAM,YAAY,EAAE,MAAM,IAAc;AAAA,IAC7E,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}