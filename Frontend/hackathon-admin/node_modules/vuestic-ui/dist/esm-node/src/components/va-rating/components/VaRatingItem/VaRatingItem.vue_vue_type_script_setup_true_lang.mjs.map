{"version":3,"file":"VaRatingItem.vue_vue_type_script_setup_true_lang.mjs","sources":["../../../../../../../src/components/va-rating/components/VaRatingItem/VaRatingItem.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootEl\"\n    role=\"button\"\n    class=\"va-rating-item\"\n    :tabindex=\"tabIndexComputed\"\n    @keydown.enter=\"onClick\"\n    @keydown.space.prevent=\"onClick\"\n    @mousemove=\"onMouseMove\"\n    @mouseleave=\"onMouseLeave\"\n    @click=\"onClick\"\n  >\n    <slot v-bind=\"{ value: visibleValue, onClick }\">\n      <va-icon\n        class=\"va-rating-item__wrapper\"\n        tabindex=\"-1\"\n        tag=\"button\"\n        :name=\"computedIconName\"\n        :size=\"$props.size\"\n        :color=\"computedColor\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, shallowRef, watch } from 'vue'\n\nimport { useColors, useSyncProp } from '../../../../composables'\n\nimport { RatingValue } from '../../types'\n\nimport { VaIcon } from '../../../va-icon'\n\ndefineOptions({\n  name: 'VaRatingItem',\n})\n\nconst props = defineProps({\n  modelValue: { type: Number, default: 0 },\n  icon: { type: String, default: 'star' },\n  halfIcon: { type: String, default: 'star_half' },\n  emptyIcon: { type: String, default: 'star_outline' },\n  halves: { type: Boolean, default: false },\n  hover: { type: Boolean, default: false },\n  tabindex: { type: [String, Number], default: 0 },\n  disabled: { type: Boolean, default: false },\n  readonly: { type: Boolean, default: false },\n  size: { type: [String, Number], default: 'medium' },\n  unselectedColor: { type: String },\n  color: { type: String, default: 'primary' },\n})\n\nconst emit = defineEmits(['update:modelValue', 'click', 'hover'])\n\nconst rootEl = shallowRef<HTMLElement>()\n\nconst [modelValue] = useSyncProp('modelValue', props, emit, RatingValue.EMPTY)\nconst hoveredValue = ref<number | null>(null)\n\nconst visibleValue = computed(() => {\n  if (props.hover && !props.disabled && !props.readonly) {\n    return hoveredValue.value || modelValue.value\n  }\n  return modelValue.value\n})\n\nconst { getColor } = useColors()\nconst computedColor = computed(() => getColor(\n  props.unselectedColor && visibleValue.value === RatingValue.EMPTY\n    ? props.unselectedColor\n    : props.color,\n))\n\nconst onMouseMove = (ev: MouseEvent) => {\n  if (!rootEl.value) { return }\n  const { offsetX } = ev\n  const iconWidth = rootEl.value.clientWidth\n\n  if (props.halves) {\n    hoveredValue.value = offsetX / iconWidth <= RatingValue.HALF ? RatingValue.HALF : RatingValue.FULL\n  } else {\n    hoveredValue.value = RatingValue.FULL\n  }\n}\n\nconst onMouseLeave = () => {\n  hoveredValue.value = null\n}\n\nconst onEnter = () => {\n  modelValue.value = 1\n}\n\nconst onClick = () => {\n  modelValue.value = hoveredValue.value || RatingValue.FULL\n  emit('click', hoveredValue.value || RatingValue.FULL)\n}\n\nwatch(hoveredValue, () => emit('hover', hoveredValue.value || RatingValue.EMPTY))\n\nconst computedIconName = computed(() => {\n  if (props.halves && visibleValue.value === RatingValue.HALF) {\n    return props.halfIcon\n  }\n  if (visibleValue.value === RatingValue.EMPTY) {\n    return props.emptyIcon\n  }\n\n  return props.icon\n})\n\nconst tabIndexComputed = computed(() => props.disabled ? -1 : props.tabindex)\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources\";\n\n.va-rating-item {\n  display: inline-block;\n\n  @include keyboard-focus-outline($radius: 2px);\n\n  &__wrapper {\n    @include normalize-button();\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,UAAM,QAAQ;AAed,UAAM,OAAO;AAEb,UAAM,SAAS;AAET,UAAA,CAAC,UAAU,IAAI,YAAY,cAAc,OAAO,MAAM,YAAY,KAAK;AACvE,UAAA,eAAe,IAAmB,IAAI;AAEtC,UAAA,eAAe,SAAS,MAAM;AAClC,UAAI,MAAM,SAAS,CAAC,MAAM,YAAY,CAAC,MAAM,UAAU;AAC9C,eAAA,aAAa,SAAS,WAAW;AAAA,MAC1C;AACA,aAAO,WAAW;AAAA,IAAA,CACnB;AAEK,UAAA,EAAE,aAAa;AACf,UAAA,gBAAgB,SAAS,MAAM;AAAA,MACnC,MAAM,mBAAmB,aAAa,UAAU,YAAY,QACxD,MAAM,kBACN,MAAM;AAAA,IAAA,CACX;AAEK,UAAA,cAAc,CAAC,OAAmB;AAClC,UAAA,CAAC,OAAO,OAAO;AAAE;AAAA,MAAO;AACtB,YAAA,EAAE,QAAY,IAAA;AACd,YAAA,YAAY,OAAO,MAAM;AAE/B,UAAI,MAAM,QAAQ;AAChB,qBAAa,QAAQ,UAAU,aAAa,YAAY,OAAO,YAAY,OAAO,YAAY;AAAA,MAAA,OACzF;AACL,qBAAa,QAAQ,YAAY;AAAA,MACnC;AAAA,IAAA;AAGF,UAAM,eAAe,MAAM;AACzB,mBAAa,QAAQ;AAAA,IAAA;AAOvB,UAAM,UAAU,MAAM;AACT,iBAAA,QAAQ,aAAa,SAAS,YAAY;AACrD,WAAK,SAAS,aAAa,SAAS,YAAY,IAAI;AAAA,IAAA;AAGhD,UAAA,cAAc,MAAM,KAAK,SAAS,aAAa,SAAS,YAAY,KAAK,CAAC;AAE1E,UAAA,mBAAmB,SAAS,MAAM;AACtC,UAAI,MAAM,UAAU,aAAa,UAAU,YAAY,MAAM;AAC3D,eAAO,MAAM;AAAA,MACf;AACI,UAAA,aAAa,UAAU,YAAY,OAAO;AAC5C,eAAO,MAAM;AAAA,MACf;AAEA,aAAO,MAAM;AAAA,IAAA,CACd;AAED,UAAM,mBAAmB,SAAS,MAAM,MAAM,WAAW,KAAK,MAAM,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}