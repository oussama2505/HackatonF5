{"version":3,"file":"VaForm.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/va-form/VaForm.vue"],"sourcesContent":["<template>\n  <component\n    class=\"va-form\"\n    :is=\"tag\"\n    @submit=\"(e: SubmitEvent) => $attrs.action === undefined && e.preventDefault()\"\n    v-bind=\"$attrs\"\n  >\n    <slot v-bind=\"{\n      isValid,\n      isDirty,\n      isTouched,\n      isLoading,\n      errorMessages,\n      errorMessagesNamed,\n      formData,\n      fields,\n      fieldsNamed,\n      fieldNames,\n      validate,\n      validateAsync,\n      reset,\n      resetValidation,\n      focus,\n      focusInvalidField,\n    }\" />\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { watch, PropType, computed, onMounted } from 'vue'\n\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\nimport { useFormParent } from '../../composables/useForm'\nimport { useLocalConfigProvider } from '../../composables/useLocalConfig'\nimport { Form } from '../../composables/useForm/types'\n\nconst statefulProps = { stateful: true }\n\nconst statefulConfig = {\n  VaInput: statefulProps,\n  VaSelect: statefulProps,\n  VaCheckbox: statefulProps,\n  VaRadio: statefulProps,\n  VaDatePicker: statefulProps,\n  VaTimePicker: statefulProps,\n  VaColorPicker: statefulProps,\n  VaSlider: statefulProps,\n  VaSwitch: statefulProps,\n  VaFileUpload: statefulProps,\n  VaRating: statefulProps,\n  VaDateInput: statefulProps,\n  VaTimeInput: statefulProps,\n}\n</script>\n\n<script lang=\"ts\" setup>\n\ndefineOptions({\n  name: 'VaForm',\n})\n\nconst props = defineProps({\n  ...useComponentPresetProp,\n  autofocus: { type: Boolean, default: false },\n  immediate: { type: Boolean, default: false },\n  tag: { type: String, default: 'form' },\n  trigger: { type: String as PropType<'blur' | 'change'>, default: 'blur' },\n  modelValue: { type: Boolean, default: true },\n  hideErrors: { type: Boolean, default: false },\n  hideErrorMessages: { type: Boolean, default: false },\n  hideLoading: { type: Boolean, default: false },\n  stateful: { type: Boolean, default: false },\n  name: { type: String, default: undefined },\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst context = useFormParent(props)\n\nwatch(context.isValid, (value) => {\n  emit('update:modelValue', value)\n})\n\nwatch(() => props.autofocus, (value) => {\n  if (value) {\n    context.focus()\n  }\n})\n\nonMounted(() => {\n  if (props.autofocus) {\n    context.focus()\n  }\n})\n\nwatch(context.fields, (newVal) => {\n  if (newVal.length && props.immediate) {\n    context.validate()\n  }\n}, { immediate: true })\n\nuseLocalConfigProvider(computed(() => {\n  if (!props.stateful) { return {} }\n\n  return statefulConfig\n}))\n\nconst {\n  immediate: immediateComputed,\n  isDirty,\n  isTouched,\n  formData,\n  fields,\n  fieldsNamed,\n  fieldNames,\n  isValid,\n  isLoading,\n  errorMessages,\n  errorMessagesNamed,\n  validate,\n  validateAsync,\n  reset,\n  resetValidation,\n  focus,\n  focusInvalidField,\n} = context\n\ndefineExpose({\n  immediate: immediateComputed,\n  isDirty,\n  formData,\n  fields,\n  fieldsNamed,\n  fieldNames,\n  isValid,\n  isTouched,\n  isLoading,\n  errorMessages,\n  errorMessagesNamed,\n  validate,\n  validateAsync,\n  reset,\n  resetValidation,\n  focus,\n  focusInvalidField,\n} satisfies Form)\n</script>\n\n<style lang=\"scss\">\n.va-form {\n  font-family: var(--va-font-family);\n}\n</style>\n"],"names":[],"mappings":";;;;AAoCA,MAAM,gBAAgB,EAAE,UAAU;AAElC,MAAM,iBAAiB;AAAA,EACrB,SAAS;AAAA,EACT,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,cAAc;AAAA,EACd,cAAc;AAAA,EACd,eAAe;AAAA,EACf,UAAU;AAAA,EACV,UAAU;AAAA,EACV,cAAc;AAAA,EACd,UAAU;AAAA,EACV,aAAa;AAAA,EACb,aAAa;AACf;;;;;;;;;;;;;;;;;;;;;AASA,UAAM,QAAQ;AAcd,UAAM,OAAO;AAEP,UAAA,UAAU,cAAc,KAAK;AAE7B,UAAA,QAAQ,SAAS,CAAC,UAAU;AAChC,WAAK,qBAAqB,KAAK;AAAA,IAAA,CAChC;AAED,UAAM,MAAM,MAAM,WAAW,CAAC,UAAU;AACtC,UAAI,OAAO;AACT,gBAAQ,MAAM;AAAA,MAChB;AAAA,IAAA,CACD;AAED,cAAU,MAAM;AACd,UAAI,MAAM,WAAW;AACnB,gBAAQ,MAAM;AAAA,MAChB;AAAA,IAAA,CACD;AAEK,UAAA,QAAQ,QAAQ,CAAC,WAAW;AAC5B,UAAA,OAAO,UAAU,MAAM,WAAW;AACpC,gBAAQ,SAAS;AAAA,MACnB;AAAA,IAAA,GACC,EAAE,WAAW,KAAA,CAAM;AAEtB,2BAAuB,SAAS,MAAM;AAChC,UAAA,CAAC,MAAM,UAAU;AAAE,eAAO;MAAG;AAE1B,aAAA;AAAA,IACR,CAAA,CAAC;AAEI,UAAA;AAAA,MACJ,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACE,IAAA;AAES,aAAA;AAAA,MACX,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,CACc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}