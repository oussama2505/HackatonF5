{"version":3,"file":"VaInputWrapper.js","sources":["../../../../../src/components/va-input-wrapper/VaInputWrapper.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-input-wrapper\"\n    :class=\"wrapperClass\"\n    @click=\"$emit('click', $event)\"\n  >\n    <fieldset class=\"va-input-wrapper__fieldset va-input-wrapper__size-keeper\">\n      <va-message-list\n        :color=\"messagesColor\"\n        :model-value=\"messagesComputed\"\n        :limit=\"errorLimit\"\n        :inherit-slots=\"['message', 'messages']\"\n        #default=\"{ ariaAttributes: messagesChildAriaAttributes }\"\n      >\n        <VaInputLabel\n          v-if=\"($props.label || $slots.label) && !$props.innerLabel\"\n          class=\"va-input-wrapper__label va-input-wrapper__label--outer\"\n          v-bind=\"vaInputLabelProps\"\n          :id=\"labelId\"\n          #default=\"bind\"\n        >\n          <slot name=\"label\" v-bind=\"bind\" />\n        </VaInputLabel>\n        <div class=\"va-input-wrapper__container\">\n          <div\n            v-if=\"$slots.prepend\"\n            class=\"va-input-wrapper__prepend-inner\"\n            @click=\"$emit('click-prepend')\"\n          >\n            <slot name=\"prepend\" />\n          </div>\n\n          <div\n            @click=\"$emit('click-field', $event)\"\n            class=\"va-input-wrapper__field\"\n          >\n            <div\n              v-if=\"$slots.prependInner\"\n              class=\"va-input-wrapper__prepend-inner\"\n              ref=\"container\"\n              @click=\"$emit('click-prepend-inner', $event)\"\n            >\n              <slot name=\"prependInner\" />\n            </div>\n\n            <div class=\"va-input-wrapper__text\">\n              <VaInputLabel\n                v-if=\"($props.label || $slots.label) && $props.innerLabel\"\n                class=\"va-input-wrapper__label va-input-wrapper__label--inner\"\n                v-bind=\"vaInputLabelProps\"\n                :id=\"labelId\"\n                #default=\"bind\"\n              >\n                <slot name=\"label\" v-bind=\"bind\" />\n              </VaInputLabel>\n\n              <slot v-bind=\"{ ariaAttributes: { ...messagesChildAriaAttributes, ...ariaAttributes }, value: vModel }\">\n                <input\n                  v-bind=\"{ ...messagesChildAriaAttributes, ...ariaAttributes }\"\n                  v-model=\"vModel\"\n                  ref=\"inputRef\"\n                  :placeholder=\"$props.placeholder\"\n                  :readonly=\"$props.readonly\"\n                  :disabled=\"$props.disabled\"\n                />\n              </slot>\n            </div>\n\n            <va-icon\n              v-if=\"success\"\n              color=\"success\"\n              name=\"va-check-circle\"\n              class=\"va-input-wrapper__icon va-input-wrapper__icon--success\"\n            />\n            <va-icon\n              v-if=\"error\"\n              color=\"danger\"\n              name=\"va-warning\"\n              class=\"va-input-wrapper__icon va-input-wrapper__icon--error\"\n            />\n            <va-icon\n              v-if=\"$props.loading\"\n              :color=\"$props.color\"\n              name=\"va-loading\"\n              spin=\"counter-clockwise\"\n              class=\"va-input-wrapper__icon va-input-wrapper__icon--loading\"\n            />\n            <slot name=\"icon\" />\n\n            <div\n              v-if=\"$slots.appendInner\"\n              class=\"va-input-wrapper__append-inner\"\n              @click=\"$emit('click-append-inner', $event)\"\n            >\n              <slot name=\"appendInner\" />\n            </div>\n          </div>\n\n          <div\n            v-if=\"$slots.append\"\n            class=\"va-input-wrapper__append-inner\"\n            @click=\"$emit('click-append')\"\n          >\n            <slot name=\"append\" />\n          </div>\n        </div>\n\n        <div v-if=\"isCounterVisible\" class=\"va-input-wrapper__counter-wrapper\" :id=\"characterCountId\">\n          <slot name=\"counter\" v-bind=\"{ valueLength: counterValue, maxLength: $props.maxLength }\">\n            <div class=\"va-input-wrapper__counter\">\n              {{ counterComputed }}\n            </div>\n          </slot>\n        </div>\n      </va-message-list>\n    </fieldset>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport {\n  useBem,\n  useFormFieldProps,\n  useValidationProps,\n  useColors,\n  useTextColor,\n  useComponentPresetProp,\n  useSyncProp,\n  useFocusDeep,\n  useNumericProp,\n} from '../../composables'\n\nimport { VaMessageList } from '../va-message-list'\nimport VaInputLabel from './components/VaInputLabel.vue'\nimport { VaIcon } from '../va-icon'\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nimport { useInputFieldAria, useInputFieldAriaProps } from './hooks/useInputFieldAria'\nimport { WithSlotInheritance } from '../../utils/with-slot-inheritance'\n\nconst VaInputLabelProps = extractComponentProps(VaInputLabel)\n\nexport default defineComponent({\n  name: 'VaInputWrapper',\n\n  components: { VaMessageList: WithSlotInheritance(VaMessageList), VaIcon, VaInputLabel },\n\n  props: {\n    ...useComponentPresetProp,\n    ...useInputFieldAriaProps,\n    ...useFormFieldProps,\n    ...useValidationProps,\n    ...VaInputLabelProps,\n    modelValue: { type: null, default: '' },\n    counter: { type: Boolean },\n    maxLength: { type: [Number, String], default: undefined },\n\n    label: { type: String, default: '' },\n    placeholder: { type: String, default: '' },\n    color: { type: String, default: 'primary' },\n    background: { type: String },\n    success: { type: Boolean, default: false },\n    loading: { type: Boolean, default: false },\n    requiredMark: { type: Boolean, default: false },\n    innerLabel: { type: Boolean, default: false },\n  },\n\n  emits: [\n    'click',\n    'click-prepend',\n    'click-append',\n    'click-prepend-inner',\n    'click-append-inner',\n    'click-field',\n    'update:modelValue',\n  ],\n\n  setup (props, { emit, slots }) {\n    const { getColor } = useColors()\n    const [vModel] = useSyncProp('modelValue', props, emit, '')\n    const inputRef = ref()\n\n    const isFocused = useFocusDeep()\n\n    const counterValue = computed(() =>\n      props.counter && typeof vModel.value === 'string' ? vModel.value.length : undefined,\n    )\n\n    const wrapperClass = useBem('va-input-wrapper', () => ({\n      ...pick(props, ['success', 'error', 'disabled', 'readonly']),\n      focused: Boolean(isFocused.value),\n      labeled: Boolean(props.label || slots.label),\n      labeledInner: Boolean(props.label || slots.label) && props.innerLabel,\n    }))\n\n    const colorComputed = computed(() => getColor(props.color))\n    const backgroundComputed = computed(() => props.background ? getColor(props.background) : '#ffffff00')\n    const messagesComputed = computed(() => props.error ? props.errorMessages : props.messages)\n\n    const { textColorComputed } = useTextColor(backgroundComputed)\n    const maxLengthComputed = useNumericProp('maxLength')\n\n    const messagesColor = computed(() => {\n      if (props.error) { return 'danger' }\n      if (props.success) { return 'success' }\n      return ''\n    })\n\n    const errorLimit = computed(() => props.error ? Number(props.errorCount) : 99)\n    const isCounterVisible = computed(() => counterValue.value !== undefined)\n    const counterComputed = computed(() =>\n      maxLengthComputed.value !== undefined ? `${counterValue.value}/${maxLengthComputed.value}` : counterValue.value,\n    )\n\n    const {\n      labelId,\n      characterCountId,\n      ariaAttributes,\n    } = useInputFieldAria(props)\n\n    const vaInputLabelProps = filterComponentProps(VaInputLabelProps)\n\n    const focus = () => { isFocused.value = true }\n    const blur = () => { isFocused.value = false }\n\n    return {\n      inputRef,\n      focus,\n      blur,\n      labelId,\n      characterCountId,\n      ariaAttributes,\n      vModel,\n      counterValue,\n      vaInputLabelProps,\n      wrapperClass,\n      textColorComputed,\n\n      isCounterVisible,\n      counterComputed,\n      colorComputed,\n      backgroundComputed,\n      messagesColor,\n      messagesComputed,\n      errorLimit,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '../../styles/resources/index.scss';\n@import './variables';\n\n@mixin parentWidthWithDefault {\n  // Following behavior implements similar behavior as <input /> element has.\n  // By default width is set in CSS variable.\n  width: var(--va-input-wrapper-width);\n  // But in case parent element has bigger width, we want to stretch input to parent width (make it bigger).\n  min-width: 100%;\n  // In case parent is smaller that input container, we want to stretch input container to parent width (make it smaller).\n  max-width: 100%;\n}\n\n.va-input-wrapper {\n  --va-input-wrapper-background: v-bind(backgroundComputed);\n  --va-input-wrapper-color: v-bind(colorComputed);\n  --va-input-wrapper-text-color: v-bind(textColorComputed);\n\n  cursor: var(--va-input-wrapper-cursor);\n  font-family: var(--va-font-family);\n  display: inline-block;\n  flex-direction: column;\n  vertical-align: middle;\n  min-width: auto;\n  max-width: 100%;\n  flex-grow: 0;\n  flex-shrink: 1;\n\n  &__fieldset {\n    // Reset browser styles\n    border: none;\n  }\n\n  &__size-keeper {\n    @include parentWidthWithDefault();\n\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  &__container {\n    display: flex;\n    align-items: center;\n    gap: var(--va-input-content-items-gap);\n    flex: 1;\n  }\n\n  &__field {\n    position: relative;\n    display: flex;\n    align-items: center;\n    flex: 1;\n    min-height: var(--va-input-wrapper-min-height);\n    border-color: var(--va-input-wrapper-border-color);\n    border-style: solid;\n    border-width: var(--va-input-wrapper-border-width);\n    border-radius: var(--va-input-wrapper-border-radius);\n    padding: 0 var(--va-input-wrapper-horizontal-padding);\n    gap: var(--va-input-wrapper-items-gap);\n    z-index: 0;\n    overflow: hidden;\n    color: v-bind(textColorComputed);\n    align-self: stretch;\n\n    @include va-background(var(--va-input-wrapper-background), var(--va-input-wrapper-background-opacity), -1);\n\n    input,\n    textarea {\n      color: inherit;\n    }\n  }\n\n  & > .va-message-list {\n    margin-top: 2px;\n  }\n\n  &__prepend-inner,\n  &__append-inner {\n    display: flex;\n    justify-content: center;\n    align-content: center;\n    align-items: center;\n  }\n\n  &__text {\n    width: 100%;\n    position: relative;\n    min-height: var(--va-input-line-height);\n    display: flex;\n    align-items: center;\n    align-self: stretch;\n    overflow: hidden;\n    caret-color: var(--va-input-wrapper-text-color);\n    color: var(--va-input-wrapper-text-color);\n\n    input {\n      @include va-scroll(var(--va-input-scroll-color));\n\n      width: 100%;\n      // Use line-height as min-height for empty content slot\n      min-height: var(--va-input-line-height);\n      background-color: transparent;\n      border-style: none;\n      outline: none;\n      line-height: var(--va-input-line-height);\n      font-size: var(--va-input-font-size);\n      font-family: inherit;\n      font-weight: var(--va-input-font-weight);\n      font-style: var(--va-input-font-style);\n      font-stretch: var(--va-input-font-stretch);\n      letter-spacing: var(--va-input-letter-spacing);\n      cursor: inherit;\n      align-self: stretch;\n\n      &::placeholder {\n        color: inherit;\n        opacity: 0.5;\n      }\n    }\n  }\n\n  &__icons {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &__reset {\n      &:focus {\n        @include focus-outline;\n      }\n    }\n  }\n\n  &__counter-wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    color: var(--va-input-wrapper-counter-color);\n    font-size: var(--va-input-wrapper-counter-font-size);\n    line-height: var(--va-input-wrapper-counter-line-height);\n  }\n\n  &__label {\n    max-width: calc(100%);\n    width: 100%;\n    display: block;\n\n    &--inner {\n      position: absolute;\n      left: 0;\n      top: 0;\n      padding-top: 1px;\n    }\n\n    &--outer {\n      margin-bottom: 2px;\n    }\n  }\n\n  // styles\n  &--labeled-inner {\n    .va-input-wrapper__text {\n      padding-top: 12px;\n      box-sizing: content-box;\n    }\n\n    .va-input-wrapper__field {\n      height: calc(var(--va-input-wrapper-min-height) - calc(var(--va-input-wrapper-border-width) * 2));\n    }\n\n    textarea {\n      margin-top: 0;\n    }\n  }\n\n  &--solid {\n    --va-input-wrapper-border-color: var(--va-input-color);\n  }\n\n  &--bordered {\n    .va-input-wrapper__field {\n      border-top-left-radius: var(--va-input-wrapper-border-radius);\n      border-top-right-radius: var(--va-input-wrapper-border-radius);\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-left-width: 0;\n      border-right-width: 0;\n      border-top-width: 0;\n\n      &::after {\n        bottom: 0;\n        border-color: var(--va-input-wrapper-border-color);\n        border-bottom-style: solid;\n      }\n    }\n  }\n\n  // Validations\n  &--error {\n    --va-input-wrapper-border-color: var(--va-input-wrapper-error-background, var(--va-danger));\n    --va-input-wrapper-background: var(--va-input-wrapper-error-background, var(--va-danger));\n    --va-input-wrapper-background-opacity: var(--va-input-wrapper-validation-background-opacity);\n  }\n\n  &--success {\n    --va-input-wrapper-border-color: var(--va-input-wrapper-success-background, var(--va-success));\n    --va-input-wrapper-background: var(--va-input-wrapper-success-background, var(--va-success));\n    --va-input-wrapper-background-opacity: var(--va-input-wrapper-validation-background-opacity);\n  }\n\n  // States\n  &--focused {\n    --va-input-wrapper-border-color: var(--va-input-wrapper-color);\n  }\n\n  &--readonly {\n    cursor: default;\n  }\n\n  &--disabled {\n    @include va-disabled;\n  }\n}\n</style>\n"],"names":["_resolveComponent","_openBlock","$emit","messagesColor","_createVNode","errorLimit","_withCtx","_createBlock","_mergeProps","vaInputLabelProps","_renderSlot","_normalizeProps","_guardReactiveProps","$slots","_createElementVNode","_createElementBlock","_createCommentVNode","$props","vModel","_withDirectives","success","isCounterVisible","characterCountId","_toDisplayString"],"mappings":"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"}