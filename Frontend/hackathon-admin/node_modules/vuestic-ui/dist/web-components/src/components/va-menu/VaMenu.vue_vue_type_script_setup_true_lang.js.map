{"version":3,"file":"VaMenu.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/va-menu/VaMenu.vue"],"sourcesContent":["<template>\n  <VaDropdown v-bind=\"dropdownProps\" ref=\"dropdown\">\n    <template #anchor>\n      <slot name=\"anchor\" />\n    </template>\n\n    <VaDropdownContent @keydown=\"onKeydown\">\n      <VaMenuList @keydown.enter.space.prevent.stop v-bind=\"menuListProps\" ref=\"menuList\" @selected=\"$emit('selected', $event); close()\">\n        <template v-if=\"$slots.default\" #default>\n          <slot />\n        </template>\n      </VaMenuList>\n    </VaDropdownContent>\n  </VaDropdown>\n</template>\n\n<script lang=\"ts\">\nimport { nextTick, ref } from 'vue'\nimport { VaDropdown, VaDropdownContent } from '../va-dropdown'\nimport { VaMenuList } from '../va-menu-list'\nimport { extractComponentProps, extractComponentEmits, filterComponentProps } from '../../utils/component-options'\nimport { useImmediateFocus, useComponentPresetProp } from '../../composables'\nimport { focusFirstFocusableChild } from '../../utils/focus'\nimport { unwrapEl } from '../../utils/unwrapEl'\n\nconst VaMenuListProps = extractComponentProps(VaMenuList)\nconst VaMenuListEmits = extractComponentEmits(VaMenuList)\nconst VaDropdownProps = extractComponentProps(VaDropdown)\nconst VaDropdownEmits = extractComponentEmits(VaDropdown)\n</script>\n\n<script lang=\"ts\" setup>\n\ndefineOptions({\n  name: 'VaMenu',\n})\n\nconst props = defineProps({\n  ...useComponentPresetProp,\n  ...VaMenuListProps,\n  ...VaDropdownProps,\n  stickToEdges: { type: Boolean, default: true },\n})\n\nconst emit = defineEmits([\n  ...VaDropdownEmits,\n  ...VaMenuListEmits,\n])\n\nconst menuList = ref<HTMLElement>()\nconst dropdown = ref<typeof VaDropdown>()\n\nuseImmediateFocus(menuList)\n\nconst close = () => {\n  dropdown.value?.hide()\n  nextTick(() => {\n    const el = unwrapEl(dropdown.value?.anchorRef)\n    if (el) { focusFirstFocusableChild(el) }\n  })\n}\n\nconst onKeydown = (event: KeyboardEvent) => {\n  if (event.key === 'Escape') {\n    close()\n  }\n\n  if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n    event.preventDefault()\n  }\n}\n\nconst menuListProps = filterComponentProps(VaMenuListProps)\nconst dropdownProps = filterComponentProps(VaDropdownProps)\n\ndefineExpose({\n  close,\n})\n</script>\n"],"names":["_a"],"mappings":";;;;;;;;;;AAyBA,MAAM,kBAAkB,sBAAsB,UAAU;AACxD,MAAM,kBAAkB,sBAAsB,UAAU;AACxD,MAAM,kBAAkB,sBAAsB,UAAU;AACxD,MAAM,kBAAkB,sBAAsB,UAAU;;;;;;;;;;;;;;;;;AAqBxD,UAAM,WAAW;AACjB,UAAM,WAAW;AAEjB,sBAAkB,QAAQ;AAE1B,UAAM,QAAQ,MAAM;;AAClB,qBAAS,UAAT,mBAAgB;AAChB,eAAS,MAAM;;AACb,cAAM,KAAK,UAASA,MAAA,SAAS,UAAT,gBAAAA,IAAgB,SAAS;AAC7C,YAAI,IAAI;AAAE,mCAAyB,EAAE;AAAA,QAAE;AAAA,MAAA,CACxC;AAAA,IAAA;AAGG,UAAA,YAAY,CAAC,UAAyB;AACtC,UAAA,MAAM,QAAQ,UAAU;AACpB;MACR;AAEA,UAAI,MAAM,QAAQ,eAAe,MAAM,QAAQ,WAAW;AACxD,cAAM,eAAe;AAAA,MACvB;AAAA,IAAA;AAGI,UAAA,gBAAgB,qBAAqB,eAAe;AACpD,UAAA,gBAAgB,qBAAqB,eAAe;AAE7C,aAAA;AAAA,MACX;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}